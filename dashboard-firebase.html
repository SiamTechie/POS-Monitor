<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POS Monitor - Enhanced Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="dashboard-firebase.css">
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo-icon">üìä</div>
                    <div>
                        <h1 class="logo-title">POS Monitor Enhanced</h1>
                        <p class="logo-subtitle">Multi-Layer Network Monitoring</p>
                    </div>
                </div>
                <div class="header-actions">
                    <!-- Hamburger Menu Button (Mobile Only) -->
                    <button class="hamburger-btn" id="hamburgerBtn" title="Menu">
                        <span class="hamburger-icon">‚ò∞</span>
                    </button>

                    <!-- Action Buttons (Desktop: inline, Mobile: dropdown) -->
                    <div class="action-buttons" id="actionButtons">
                        <button class="info-btn" id="infoBtn" title="‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô">
                            ‚ùì ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ
                        </button>
                        <button class="manage-btn" id="manageBtn" title="Manage branches">
                            üóëÔ∏è Manage
                        </button>
                    </div>

                    <!-- Status (Always visible) -->
                    <div class="connection-status" id="connectionStatus">
                        <span class="status-dot"></span>
                        <span class="status-text">Connecting...</span>
                    </div>
                    <div class="last-update">
                        Last update: <span id="lastUpdate">--:--</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">

            <!-- Summary Cards -->
            <section class="summary-section">
                <div class="card summary-card card-total">
                    <div class="card-icon">üè¢</div>
                    <div class="card-content">
                        <div class="card-label">Total Branches</div>
                        <div class="card-value" id="totalBranches">--</div>
                    </div>
                </div>

                <div class="card summary-card card-good">
                    <div class="card-icon">‚úÖ</div>
                    <div class="card-content">
                        <div class="card-label">Good Connection</div>
                        <div class="card-value" id="goodBranches">--</div>
                    </div>
                </div>

                <div class="card summary-card card-warning">
                    <div class="card-icon">‚ö†Ô∏è</div>
                    <div class="card-content">
                        <div class="card-label">Need Attention</div>
                        <div class="card-value" id="warningBranches">--</div>
                    </div>
                </div>

                <div class="card summary-card card-critical">
                    <div class="card-icon">üî¥</div>
                    <div class="card-content">
                        <div class="card-label">Critical Issues</div>
                        <div class="card-value" id="criticalBranches">--</div>
                    </div>
                </div>
            </section>

            <!-- Filter & Search -->
            <section class="filter-section">
                <div class="card">
                    <div class="filter-controls">
                        <div class="search-box">
                            <span class="search-icon">üîç</span>
                            <input type="text" id="searchInput" placeholder="Search branch name...">
                        </div>
                        <div class="filter-buttons">
                            <button class="filter-btn active" data-filter="all">All</button>
                            <button class="filter-btn" data-filter="good">Good</button>
                            <button class="filter-btn" data-filter="warning">Warning</button>
                            <button class="filter-btn" data-filter="critical">Critical</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Branch Status Grid -->
            <section class="branches-section">
                <div class="section-header">
                    <h2>Branch Status</h2>
                    <div class="view-toggle">
                        <button class="view-btn active" data-view="grid" id="viewGridBtn">üìä Grid</button>
                        <button class="view-btn" data-view="table" id="viewTableBtn">üìã Table</button>
                    </div>
                </div>

                <!-- Loading State -->
                <div id="loadingState" class="loading-state">
                    <div class="spinner"></div>
                    <p>Loading branch data from Firebase...</p>
                </div>

                <!-- Empty State -->
                <div id="emptyState" class="empty-state" style="display: none;">
                    <div class="empty-icon">üì≠</div>
                    <h3>No Data Available</h3>
                    <p>Please ensure monitoring scripts are running on branch computers.</p>
                </div>

                <!-- Grid View -->
                <div id="branchesGrid" class="branches-grid" style="display: none;">
                    <!-- Branch cards will be inserted here -->
                </div>

                <!-- Table View -->
                <div id="branchesTableContainer" class="branches-table-container" style="display: none;">
                    <table class="branches-table">
                        <thead>
                            <tr>
                                <th>‡∏™‡∏≤‡∏Ç‡∏≤</th>
                                <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                                <th>POS Server</th>
                                <th>Internet</th>
                                <th>HTTP</th>
                                <th>‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢</th>
                                <th>‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó</th>
                            </tr>
                        </thead>
                        <tbody id="branchesTableBody">
                            <!-- Table rows will be inserted here -->
                        </tbody>
                    </table>
                </div>
            </section>

        </div>
    </main>

    <!-- Delete Confirmation Modal -->
    <div class="modal-overlay" id="deleteModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-icon">‚ö†Ô∏è</div>
            <h3 class="modal-title">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö</h3>
            <p class="modal-message">‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö "<span id="deleteBranchName"></span>" ‡∏à‡∏≤‡∏Å Dashboard ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</p>
            <p class="modal-warning">‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ</p>
            <div class="modal-actions">
                <button class="modal-btn modal-btn-cancel" id="cancelDeleteBtn">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                <button class="modal-btn modal-btn-delete" id="confirmDeleteBtn">üóëÔ∏è ‡∏•‡∏ö</button>
            </div>
        </div>
    </div>

    <!-- Thai Help Modal -->
    <div class="modal-overlay" id="infoModal" style="display: none;">
        <div class="modal-content modal-help">
            <div class="modal-header">
                <h3 class="modal-title">üìä ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô POS Monitor Dashboard</h3>
                <button class="modal-close-btn" id="closeInfoBtn">‚úï</button>
            </div>

            <div class="help-content">
                <section class="help-section">
                    <h4>üéØ Dashboard ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?</h4>
                    <p>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á <strong>POS Monitor</strong> ‡∏ö‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏™‡∏≤‡∏Ç‡∏≤
                        ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏à‡∏∞‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ó‡∏∏‡∏Å 1 ‡∏ô‡∏≤‡∏ó‡∏µ ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏°‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà Dashboard ‡∏ô‡∏µ‡πâ‡πÅ‡∏ö‡∏ö Real-time</p>
                </section>

                <section class="help-section">
                    <h4>üìà ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå</h4>
                    <table class="help-table">
                        <thead>
                            <tr>
                                <th>‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ß‡∏±‡∏î</th>
                                <th>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢</th>
                                <th>‡∏ö‡∏≠‡∏Å‡∏≠‡∏∞‡πÑ‡∏£</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>POS Server</strong></td>
                                <td>‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á res.drugnetcenter.com</td>
                                <td>‡∏ñ‡πâ‡∏≤‡∏ä‡πâ‡∏≤ = Server POS ‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠ ‡πÄ‡∏ô‡πá‡∏ï‡πÑ‡∏õ‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á Server</td>
                            </tr>
                            <tr>
                                <td><strong>Internet</strong></td>
                                <td>‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á Google (8.8.8.8)</td>
                                <td>‡∏ñ‡πâ‡∏≤‡∏ä‡πâ‡∏≤ = ‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï‡∏™‡∏≤‡∏Ç‡∏≤‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤</td>
                            </tr>
                            <tr>
                                <td><strong>HTTP Response</strong></td>
                                <td>‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà Server ‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö HTTP Request</td>
                                <td>‡∏ñ‡πâ‡∏≤‡∏ä‡πâ‡∏≤ = Server ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏Å‡∏¥‡∏ô ‡∏´‡∏£‡∏∑‡∏≠ ‡∏£‡∏∞‡∏ö‡∏ö‡∏ä‡πâ‡∏≤</td>
                            </tr>
                        </tbody>
                    </table>
                </section>

                <section class="help-section">
                    <h4>üö¶ ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏µ</h4>
                    <div class="status-legend">
                        <div class="legend-item">
                            <span class="legend-badge good">‚úì Good</span>
                            <span>&lt; 100ms - ‡πÄ‡∏ô‡πá‡∏ï‡∏î‡∏µ‡∏°‡∏≤‡∏Å ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏•‡∏∑‡πà‡∏ô‡πÑ‡∏´‡∏•</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-badge warning">‚ö† Warning</span>
                            <span>100-300ms - ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡∏≠‡∏≤‡∏à‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ä‡πâ‡∏≤</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-badge critical">‚úó Critical</span>
                            <span>&gt; 300ms - ‡∏ä‡πâ‡∏≤‡∏°‡∏≤‡∏Å ‡∏≠‡∏≤‡∏à‡πÄ‡∏Å‡∏¥‡∏î Timeout</span>
                        </div>
                    </div>
                </section>

                <section class="help-section">
                    <h4>üîç ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤</h4>
                    <table class="help-table">
                        <thead>
                            <tr>
                                <th>‡∏≠‡∏≤‡∏Å‡∏≤‡∏£</th>
                                <th>‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏</th>
                                <th>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>POS ‡∏ä‡πâ‡∏≤ + Internet ‡∏ä‡πâ‡∏≤</td>
                                <td>‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï‡∏™‡∏≤‡∏Ç‡∏≤‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤</td>
                                <td>‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Router / ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ ISP</td>
                            </tr>
                            <tr>
                                <td>POS ‡∏ä‡πâ‡∏≤ + Internet ‡∏õ‡∏Å‡∏ï‡∏¥</td>
                                <td>Server POS ‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤</td>
                                <td>‡πÅ‡∏à‡πâ‡∏á‡∏ó‡∏µ‡∏° Server / Programmer</td>
                            </tr>
                            <tr>
                                <td>HTTP ‡∏ä‡πâ‡∏≤ + Ping ‡∏õ‡∏Å‡∏ï‡∏¥</td>
                                <td>Server ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏Å‡∏¥‡∏ô</td>
                                <td>‡∏£‡∏≠ Server ‡∏†‡∏≤‡∏£‡∏∞‡∏•‡∏î ‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏à‡πâ‡∏á‡∏ó‡∏µ‡∏° Server</td>
                            </tr>
                        </tbody>
                    </table>
                </section>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>POS Monitor Enhanced System | Multi-Layer Network Monitoring with Firebase</p>
        </div>
    </footer>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

    <!-- Dashboard Script -->
    <script src="dashboard-firebase.js"></script>
</body>

</html>